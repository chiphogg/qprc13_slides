---
title       : 
subtitle    : 
author      : Charles Hogg
job         : Google, Inc.
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : [mathjax]     # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}

```{r setup, include=FALSE}
require(knitr)
require(gppois)
require(ggplot2)
require(Cairo)
opts_chunk$set(fig.width=13, fig.height=5, warning=FALSE, cache=TRUE,
  dev='CairoPNG', echo=FALSE)
theme_set(theme_classic(40))
knit_hooks$set(webgl = function(before, options, envir) {
  library(rgl)
  ## after a chunk has been evaluated
  if (before || rgl.cur() == 0) return()  # no active device
  name <- sprintf('rgl_%s.html', options$label)
  par3d(windowRect = 100 + options$dpi * c(0, 0,
                                           options$fig.width,
                                           options$fig.height))
  Sys.sleep(.05) # need time to respond to window size change
  writeLines(c('%WebGL%', '<script>webGLStart();</script>'), tpl <- tempfile())
  writeWebGL(dir = dirname(name), filename = name, template = tpl)
  sprintf('<iframe src="%s" width="%s" height="%s"></iframe>', name,
    options$dpi * options$fig.width, options$dpi * options$fig.height)
})
```

---

# Overview

The basic story is this.

We've got a metal plate, and we stretch it.  So there's some amount of strain at
every point on this surface.  We've measured this strain function at a bunch of
points, but we wish we knew it everywhere.  We wish we knew this _strain
surface_, if you like.  We have some idea about it, but we're not completely
certain.

So, first question: how uncertain _are_ we?  You see we'll need a sensible way
to _quantify_ uncertainty in _continuous functions_.

---

# Quantifying uncertainty

Great narrative for great justice!

1. What we wish we had
  - _Individual_ random quantities (like rolls of a die) are easier to understand
  - Show a bunch of random draws of functions.  ("WAT.")
    - Here, the probabilities don't matter; what matters are the functions in the distribution.
2. Simpler case: two random numbers.
  - Show on scatterplot.
    - Familiar, and great, visualization!  But it **doesn't scale**.
3. Simpler case; alternative view
  - Show side-by-side with scatterplot: random variables next to each other
    - Connect them by lines... hmm!  Suggestive!!
4. Lots of variables
5. Return to scatterplot view
  - nice animated gif

Maybe then talk about GPs: use the simplest multivariate probability distribution.

---

## Probability example: rolling dice

```{r dice.plot.function, cache=FALSE}
dice_plot <- function(n, rolls) {
  set.seed(1)
  d <- data.frame(
    x=round(runif(n=n, min=0.5, max=6.5))
    + round(runif(n=n, min=0.5, max=6.5)))
  p <- (ggplot(data=d, aes(x=x))
    + geom_histogram(binwidth=1, colour='white', origin=0.5)
    + scale_x_continuous("Total", limits=c(1, 13),
      breaks=seq(from=2, to=12, by=2))
    + scale_y_continuous("", breaks=rolls)
    + ggtitle(sprintf("Rolling 2 dice %d times", n))
    )
  return (p)
}
```

```{r make.gif, cache=FALSE, include=FALSE}
set.seed(5)
# Make the animation
library(animation)
saveGIF({
  rolls <- as.vector(outer(c(2, 5, 10), 10^(0:3)))
  rolls <- c(rolls, rep(tail(rolls, n=1), 4))
  for (i in rolls) {
    print(dice_plot(i, rolls))
  }
}, movie.name='dice.gif',
outdir=paste(getwd(), 'custom', sep='/'),
clean=TRUE, interval=2, ani.dev='CairoPNG',
ani.width=150 * 7.0, ani.height=150 * 3.5)
```

<img src="custom/dice.gif">

---

## Two variables

```{r scatterplot.function, cache=FALSE, include=FALSE}
twod_scatterplot <- function(n, old=0) {
  # A 2d scatterplot of draws from a bivariate normal.
  #
  # Args:
  #   n: The number of points to plot
  #   old: The number of points considered "old" (might be greyed out).
  set.seed(1)
  covariance <- 0.8
  L <- t(chol(matrix(c(1, covariance, covariance, 1), nrow=2)))
  x <- L %*% matrix(rnorm(n=2 * n), nrow=2)
  d <- data.frame(x=x[1, ], y=x[2, ], type=c(rep('a', old), rep('b', n - old)))
  lim <- 3
  p <- (ggplot(data=d, aes(x=x, y=y, colour=type))
    + geom_point(size=2)
    + scale_x_continuous("X1", limits=c(-lim, lim))
    + scale_y_continuous("X2", limits=c(-lim, lim))
    + scale_colour_manual(values=c(a='grey40', b='black'))
    + theme(legend.position='none')
    )
  return (p)
}
num <- 0
```


```{r scatterplot.test.1, cache=FALSE, fig.width=7, fig.height=7}
old.num <- num
num <- 20
print(twod_scatterplot(num, old.num));
```

---

## Two variables

```{r scatterplot.test.2, cache=FALSE, fig.width=7, fig.height=7}
old.num <- num
num <- num * 3
print(twod_scatterplot(num, old.num));
```

---

## Two variables

```{r scatterplot.test.3, cache=FALSE, fig.width=7, fig.height=7}
old.num <- num
num <- num * 3
print(twod_scatterplot(num, old.num));
```

---

## Two variables

```{r scatterplot.test.4, cache=FALSE, fig.width=7, fig.height=7}
old.num <- num
num <- num * 3
print(twod_scatterplot(num, old.num));
```

Show a two-variable scatterplot.  Emphasize: the way we want to interact with this is by **taking draws**.

Also, make this an animated gif and just one slide.

---

## ...Infinity!

Show a bunch of random function draws.  Make them non-trivial, but with noticeable variation.  Hey, maybe just specify a non-trivial mean function.

---

## Covariance is Key

Animate a 2-d scatterplot as we slide between near and far points.

---

## What's the probability of a function?

---

## Another view

Gaussian process machinery:
  - There's some function you wish you knew.
  - Give the machinery some arbitrary number of points where you know the
    function (it's fine if they're noisy).
  - Ask it for the values of the function at some other set of points
    - The key is: look at those values **simultaneously**.

---

## Also worth mentioning

Gaussian processes were used by the BEST collaboration (solved problems with
time series, etc.)

---

# Steel strain results

---

# Implications for the experiment

---

## Rutherford's criticism

(pic of Rutherford)

"If your experiment needs statistics, you ought to have done a better experiment."

Response: "Better statistics can lead you to that better experiment"

(Show as memes?  Pic of Bayes...)

---

## Gap width: ripe for tuning

<object data="./inkscape/beam_1_straight.svg" type="image/svg+xml"></object>

---

## Gap width: ripe for tuning

<object data="inkscape/beam_2_tilted.svg" type="image/svg+xml"></object>

---

# Conclusions
